--- origsrc/gtk-sharp-2.12.1/atk/atk-sharp.dll.config.in	2008-03-06 21:25:01.000000000 -0600
+++ src/gtk-sharp-2.12.1/atk/atk-sharp.dll.config.in	2008-04-22 20:43:56.250000000 -0500
@@ -1,4 +1,4 @@
 <configuration>
-  <dllmap dll="libgobject-2.0-0.dll" target="libgobject-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libatk-1.0-0.dll" target="libatk-1.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
+  <dllmap dll="libgobject-2.0-0.dll" target="@LIB_PREFIX@gobject-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libatk-1.0-0.dll" target="@LIB_PREFIX@atk-1.0@LIB_SONAME@0@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/atk/glue/Makefile.am	2008-04-17 20:06:54.000000000 -0500
+++ src/gtk-sharp-2.12.1/atk/glue/Makefile.am	2008-04-22 20:43:56.265625000 -0500
@@ -1,6 +1,6 @@
 lib_LTLIBRARIES = libatksharpglue-2.la
 
-libatksharpglue_2_la_LDFLAGS = -module -avoid-version -no-undefined
+libatksharpglue_2_la_LDFLAGS = -avoid-version -no-undefined
 
 libatksharpglue_2_la_SOURCES = 	\
 	misc.c			\
--- origsrc/gtk-sharp-2.12.1/configure.in	2008-03-21 21:35:29.000000000 -0500
+++ src/gtk-sharp-2.12.1/configure.in	2008-04-22 20:43:56.609375000 -0500
@@ -16,14 +16,14 @@
 WIN64DEFINES=
 
 case "$host" in
-	x86_64-*-mingw*|x86_64-*-cygwin*)
+	x86_64-*-mingw*)
 		WIN64DEFINES="-define:WIN64LONGS"
 		platform_win32=yes
 		AC_DEFINE(PLATFORM_WIN32,1,[Platform is Win32])
 		CC="gcc -mno-cygwin -g"
 		HOST_CC="gcc"
 		;;
-	*-*-mingw*|*-*-cygwin*)
+	*-*-mingw*)
 		platform_win32=yes
 		AC_DEFINE(PLATFORM_WIN32,1,[Platform is Win32])
 		CC="gcc -mno-cygwin -g"
@@ -124,13 +124,23 @@
 fi
 
 AC_PATH_PROG(CSC, mcs, no)
-if test `uname -s` = "Darwin"; then
-	LIB_PREFIX=
+case `uname -s` in
+  Darwin)
+	LIB_PREFIX=lib
+	LIB_SONAME=.
 	LIB_SUFFIX=.dylib
-else
-	LIB_PREFIX=.so
+	;;
+  CYGWIN*)
+	LIB_PREFIX=cyg
+	LIB_SONAME=-
+	LIB_SUFFIX=.dll
+	;;
+  *)
+	LIB_PREFIX=lib
+	LIB_SONAME=.so.
 	LIB_SUFFIX=
-fi
+	;;
+esac
 SDCHECK="`$GACUTIL /l |grep ^System.Drawing, | head -n1 |cut -f1 -d','`"
 if test "x$SDCHECK" = "xSystem.Drawing"; then
 	enable_dotnet=yes
@@ -162,6 +172,7 @@
 AC_SUBST(GACUTIL)
 AC_SUBST(GACUTIL_FLAGS)
 AC_SUBST(LIB_PREFIX)
+AC_SUBST(LIB_SONAME)
 AC_SUBST(LIB_SUFFIX)
 AC_SUBST(GENERATED_SOURCES)
 
--- origsrc/gtk-sharp-2.12.1/gdk/gdk-sharp.dll.config.in	2008-03-06 21:26:42.000000000 -0600
+++ src/gtk-sharp-2.12.1/gdk/gdk-sharp.dll.config.in	2008-04-22 20:43:56.625000000 -0500
@@ -1,6 +1,7 @@
 <configuration>
-  <dllmap dll="libglib-2.0-0.dll" target="libglib-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgobject-2.0-0.dll" target="libgobject-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgdk-win32-2.0-0.dll" target="libgdk-x11-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgdk_pixbuf-2.0-0.dll" target="libgdk_pixbuf-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
+  <dllmap dll="libglib-2.0-0.dll" target="@LIB_PREFIX@glib-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgobject-2.0-0.dll" target="@LIB_PREFIX@gobject-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgdk-win32-2.0-0.dll" target="@LIB_PREFIX@gdk-x11-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgdk_pixbuf-2.0-0.dll" target="@LIB_PREFIX@gdk_pixbuf-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="gdksharpglue-2" target="@LIB_PREFIX@gdksharpglue-2@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/gdk/glue/Makefile.am	2008-03-06 21:26:41.000000000 -0600
+++ src/gtk-sharp-2.12.1/gdk/glue/Makefile.am	2008-04-22 20:43:56.625000000 -0500
@@ -13,7 +13,7 @@
 # Adding a new glue file?
 # Please remember to update makefile.win32
 
-libgdksharpglue_2_la_LDFLAGS = -module -avoid-version -no-undefined
+libgdksharpglue_2_la_LDFLAGS = -avoid-version -no-undefined
 
 libgdksharpglue_2_la_LIBADD = $(GTK_LIBS)
 
--- origsrc/gtk-sharp-2.12.1/glade/glade-sharp.dll.config.in	2008-03-06 21:26:47.000000000 -0600
+++ src/gtk-sharp-2.12.1/glade/glade-sharp.dll.config.in	2008-04-22 20:43:56.640625000 -0500
@@ -1,3 +1,4 @@
 <configuration>
-  <dllmap dll="libglade-2.0-0.dll" target="libglade-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
+  <dllmap dll="libglade-2.0-0.dll" target="@LIB_PREFIX@glade-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="gladesharpglue-2" target="@LIB_PREFIX@gladesharpglue-2@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/glade/glue/Makefile.am	2008-03-06 21:26:47.000000000 -0600
+++ src/gtk-sharp-2.12.1/glade/glue/Makefile.am	2008-04-22 20:43:56.640625000 -0500
@@ -6,7 +6,7 @@
 TARGET = 
 endif
 
-libgladesharpglue_2_la_LDFLAGS = -module -avoid-version -no-undefined
+libgladesharpglue_2_la_LDFLAGS = -avoid-version -no-undefined
 
 libgladesharpglue_2_la_SOURCES = 	\
 	gladexml.c
--- origsrc/gtk-sharp-2.12.1/glib/glib-sharp.dll.config.in	2008-03-06 21:26:49.000000000 -0600
+++ src/gtk-sharp-2.12.1/glib/glib-sharp.dll.config.in	2008-04-22 20:43:56.671875000 -0500
@@ -1,5 +1,6 @@
 <configuration>
-  <dllmap dll="libglib-2.0-0.dll" target="libglib-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgobject-2.0-0.dll" target="libgobject-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgthread-2.0-0.dll" target="libgthread-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
+  <dllmap dll="libglib-2.0-0.dll" target="@LIB_PREFIX@glib-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgobject-2.0-0.dll" target="@LIB_PREFIX@gobject-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgthread-2.0-0.dll" target="@LIB_PREFIX@gthread-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="glibsharpglue-2" target="@LIB_PREFIX@glibsharpglue-2@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/glib/glue/Makefile.am	2008-03-06 21:26:49.000000000 -0600
+++ src/gtk-sharp-2.12.1/glib/glue/Makefile.am	2008-04-22 20:43:56.671875000 -0500
@@ -1,6 +1,6 @@
 lib_LTLIBRARIES = libglibsharpglue-2.la
 
-libglibsharpglue_2_la_LDFLAGS = -module -avoid-version -no-undefined
+libglibsharpglue_2_la_LDFLAGS = -avoid-version -no-undefined
 
 libglibsharpglue_2_la_SOURCES = 	\
 	error.c			\
--- origsrc/gtk-sharp-2.12.1/gtk/glue/Makefile.am	2008-03-06 21:25:11.000000000 -0600
+++ src/gtk-sharp-2.12.1/gtk/glue/Makefile.am	2008-04-22 20:43:56.734375000 -0500
@@ -20,7 +20,7 @@
 # Adding a new glue file?
 # Please remember to update makefile.win32
 
-libgtksharpglue_2_la_LDFLAGS = -module -avoid-version -no-undefined
+libgtksharpglue_2_la_LDFLAGS = -avoid-version -no-undefined
 
 libgtksharpglue_2_la_LIBADD = $(GTK_LIBS)
 
--- origsrc/gtk-sharp-2.12.1/gtk/gtk-sharp.dll.config.in	2008-03-06 21:25:11.000000000 -0600
+++ src/gtk-sharp-2.12.1/gtk/gtk-sharp.dll.config.in	2008-04-22 20:43:56.750000000 -0500
@@ -1,6 +1,7 @@
 <configuration>
-  <dllmap dll="libglib-2.0-0.dll" target="libglib-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgobject-2.0-0.dll" target="libgobject-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libatk-1.0-0.dll" target="libatk-1.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgtk-win32-2.0-0.dll" target="libgtk-x11-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
+  <dllmap dll="libglib-2.0-0.dll" target="@LIB_PREFIX@glib-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgobject-2.0-0.dll" target="@LIB_PREFIX@gobject-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libatk-1.0-0.dll" target="@LIB_PREFIX@atk-1.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgtk-win32-2.0-0.dll" target="@LIB_PREFIX@gtk-x11-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="gtksharpglue-2" target="@LIB_PREFIX@gtksharpglue-2@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/gtkdotnet/gtk-dotnet.dll.config.in	2008-03-06 21:25:16.000000000 -0600
+++ src/gtk-sharp-2.12.1/gtkdotnet/gtk-dotnet.dll.config.in	2008-04-22 20:43:56.750000000 -0500
@@ -1,3 +1,3 @@
 <configuration>
-  <dllmap dll="libgdk-win32-2.0-0.dll" target="libgdk-x11-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
+  <dllmap dll="libgdk-win32-2.0-0.dll" target="@LIB_PREFIX@gdk-x11-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/pango/glue/Makefile.am	2008-03-06 21:25:17.000000000 -0600
+++ src/gtk-sharp-2.12.1/pango/glue/Makefile.am	2008-04-22 20:43:56.765625000 -0500
@@ -9,7 +9,7 @@
 # Adding a new glue file?
 # Please remember to update makefile.win32
 
-libpangosharpglue_2_la_LDFLAGS = -module -avoid-version -no-undefined
+libpangosharpglue_2_la_LDFLAGS = -avoid-version -no-undefined
 
 libpangosharpglue_2_la_LIBADD = $(PANGO_LIBS)
 
--- origsrc/gtk-sharp-2.12.1/pango/pango-sharp.dll.config.in	2008-03-06 21:25:17.000000000 -0600
+++ src/gtk-sharp-2.12.1/pango/pango-sharp.dll.config.in	2008-04-22 20:43:56.812500000 -0500
@@ -1,6 +1,7 @@
 <configuration>
-  <dllmap dll="libglib-2.0-0.dll" target="libglib-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgobject-2.0-0.dll" target="libgobject-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libpango-1.0-0.dll" target="libpango-1.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
+  <dllmap dll="libglib-2.0-0.dll" target="@LIB_PREFIX@glib-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgobject-2.0-0.dll" target="@LIB_PREFIX@gobject-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libpango-1.0-0.dll" target="@LIB_PREFIX@pango-1.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="pangosharpglue-2" target="@LIB_PREFIX@pangosharpglue-2@LIB_SUFFIX@"/>
   <dllmap dll="libpangocairo-1.0-0.dll" target="libpangocairo-1.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/sample/cairo-sample.exe.config.in	2008-03-06 21:25:05.000000000 -0600
+++ src/gtk-sharp-2.12.1/sample/cairo-sample.exe.config.in	2008-04-22 20:43:56.812500000 -0500
@@ -1,6 +1,6 @@
 <configuration>
-  <dllmap dll="libglib-2.0-0.dll" target="libglib-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgobject-2.0-0.dll" target="libgobject-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgdk-win32-2.0-0.dll" target="libgdk-x11-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
-  <dllmap dll="libgdk_pixbuf-2.0-0.dll" target="libgdk_pixbuf-2.0@LIB_PREFIX@.0@LIB_SUFFIX@"/>
+  <dllmap dll="libglib-2.0-0.dll" target="@LIB_PREFIX@glib-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgobject-2.0-0.dll" target="@LIB_PREFIX@gobject-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgdk-win32-2.0-0.dll" target="@LIB_PREFIX@gdk-x11-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
+  <dllmap dll="libgdk_pixbuf-2.0-0.dll" target="@LIB_PREFIX@gdk_pixbuf-2.0@LIB_SONAME@0@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/sample/opaquetest/opaquetest.exe.config.in	2008-03-06 21:25:02.000000000 -0600
+++ src/gtk-sharp-2.12.1/sample/opaquetest/opaquetest.exe.config.in	2008-04-22 20:43:56.828125000 -0500
@@ -1,3 +1,3 @@
 <configuration>
-  <dllmap dll="libopaque.dll" target=".libs/libopaque@LIB_PREFIX@@LIB_SUFFIX@"/>
+  <dllmap dll="libopaque.dll" target=".libs/@LIB_PREFIX@opaque@LIB_SUFFIX@"/>
 </configuration>
--- origsrc/gtk-sharp-2.12.1/sample/valtest/valtest.exe.config.in	2008-03-06 21:25:02.000000000 -0600
+++ src/gtk-sharp-2.12.1/sample/valtest/valtest.exe.config.in	2008-04-22 20:43:56.828125000 -0500
@@ -1,3 +1,3 @@
 <configuration>
-  <dllmap dll="libvalobj.dll" target=".libs/libvalobj@LIB_PREFIX@@LIB_SUFFIX@"/>
+  <dllmap dll="libvalobj.dll" target=".libs/@LIB_PREFIX@valobj@LIB_SUFFIX@"/>
 </configuration>
